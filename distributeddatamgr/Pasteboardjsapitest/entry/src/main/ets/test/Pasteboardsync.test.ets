import pasteboard from '@ohos.pasteboard';
import { beforeEach, describe, expect, it } from '@ohos/hypium';

let error = undefined
let tag = "PASTEBOARDSYNC--------------------"

export default function pasteboardSyncTest(){
  describe("pasteboardSyncTest", function (){
    console.info("start#############################start")
    beforeEach(function (){
      error = undefined
    })


    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0100
     * @tc.name clearDataSync interface test
     * @tc.desc clearDataSync interface test
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0100", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0100 ---------start")
      let pasteData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard = pasteboard.getSystemPasteboard();

      systemPasteBoard.setDataSync(pasteData);
      expect(systemPasteBoard.hasDataSync()).assertEqual(true);
      console.info(tag + "Succeeded in setting PasteData");

      systemPasteBoard.clearDataSync();

      let result = systemPasteBoard.hasDataSync();
      console.info(tag + `Succeed in checking the PasteBoard. Result: ${result}`)
      expect(result).assertEqual(false);
      console.info(tag + "Clear the data in the system PasteBoard finished")

      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0100 ---------end")
    })


    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0200
     * @tc.name setDataSync interface test
     * @tc.desc setDataSync interface test
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0200", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0200 ---------start")
      let pasteData =  pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard =  pasteboard.getSystemPasteboard();

      console.info(tag +`${systemPasteBoard}`);
      systemPasteBoard.setDataSync(pasteData);
      console.info(tag + "Succeeded in setting PasteData");
      let result = systemPasteBoard.getDataSync();

      console.info(tag + `Get the pasteboard from system PasteBoard success. Result: ${result}`)
      expect(result.getPrimaryText()).assertEqual("pasteboard");

      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0200 ---------end")
    })


    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0300
     * @tc.name setDataSync interface test
     * @tc.desc setDataSync paremeter is null
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0300", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0300 ---------start")
      let pasteData =  pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard =  pasteboard.getSystemPasteboard();

      console.info(tag +`${systemPasteBoard}`)
      try{
        systemPasteBoard.setDataSync(null);
        console.info(tag + "Succeeded in setting PasteData");
      }catch(err){
        expect(err.code == 401).assertTrue();
      }
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0300 ---------end")
    })

    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0400
     * @tc.name setDataSync interface test
     * @tc.desc setDataSync paremeter is undefined
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0400", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0400 ---------start")
      let pasteData =  pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard =  pasteboard.getSystemPasteboard();

      console.info(tag +`${systemPasteBoard}`);
      try{
        systemPasteBoard.setDataSync(undefined);
        console.info(tag + "Succeeded in setting PasteData");
      }catch(err){
        expect(err.code == 401).assertTrue();
      }
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0400 ---------end")
    })


    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0500
     * @tc.name getDataSync interface test
     * @tc.desc getDataSync interface test
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0500", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0500 ---------start")
      let pasteData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard = pasteboard.getSystemPasteboard();

      systemPasteBoard.setData(pasteData);
      console.info(tag + "Succeeded in setting PasteData");

      let resultFlg = systemPasteBoard.hasDataSync();
      expect(resultFlg).assertTrue();

      let resultText = systemPasteBoard.getDataSync().getPrimaryText();
      expect(resultText).assertEqual("pasteboard");
      console.info(tag + `Get the pasteboard from system PasteBoard success. Result: ${resultText}`)

      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0500 ---------end")
    })

    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0600
     * @tc.name hasDataSync interface test
     * @tc.desc hasDataSync is true
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0600", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0600 ---------start")
      let pasteData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "pasteboard");
      let systemPasteBoard = pasteboard.getSystemPasteboard();

      systemPasteBoard.setDataSync(pasteData);
      console.info(tag + "Succeeded in setting PasteData");
      let result = systemPasteBoard.hasDataSync();
      expect(result).assertTrue();
      console.info(tag + `Succeed in checking the PasteBoard. Result: ${result}`);;

      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0600 ---------end");

    })

    /**
     * @tc.number SUB_Pasteboard_Local_SDK_PasteboardSync_0700
     * @tc.name hasDataSync interface test
     * @tc.desc hasDataSync is false
     */
    it("SUB_Pasteboard_Local_SDK_PasteboardSync_0700", 0, function () {
      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0700 ---------start")
      let pasteData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, "");
      let systemPasteBoard = pasteboard.getSystemPasteboard();
      systemPasteBoard.clearDataSync();
      let result = systemPasteBoard.hasDataSync();
      expect(result).assertEqual(false);
      console.info(tag + `Succeed in checking the PasteBoard. Result: ${result}`)

      console.info(tag + "SUB_Pasteboard_Local_SDK_PasteboardSync_0700 ---------end")

    })

  })
}

