import("//build/test.gni")

ohos_static_library("libcommom") {
  include_dirs = [
    ".",
    "//third_party/googletest/googletest/include",
  ]

  sources = [
    "fdfill.cpp",
    "memfill.cpp",
    "mtest.cpp",
    "print.cpp",
    "rand.cpp",
    "setrlim.cpp",
    "utf8.cpp",
    "vmfill.cpp",
  ]

  cflags_c = [
    "-pipe",
    "-std=c99",
    "-D_POSIX_C_SOURCE=200809L",
    "-Wall",
    "-Wno-unused",
    "-Wno-unused-function",
    "-Wno-missing-braces",
    "-Wno-overflow",
    "-Wno-unknown-pragmas",
    "-fno-builtin",
    "-frounding-math",
    "-Werror=implicit-function-declaration",
    "-Werror=implicit-int",
    "-Werror=pointer-sign",
    "-Werror=pointer-arith",
    "-g",
    "-D_FILE_OFFSET_BITS=64",
  ]

  output_name = "libcommom"
}

ohos_unittest("static_lib") {
  module_out_path = "libc-test/src/common"
  deps = [ ":libcommom" ]
}
